import { computed, signal } from '@angular/core';
export class BrnColumnManager {
    constructor(initialColumnVisibility) {
        this.displayedColumns = computed(() => {
            return Object.entries(this._columnVisibility())
                .filter(([, value]) => (typeof value === 'boolean' ? value : value.visible))
                .map(([key]) => key);
        });
        this.isColumnVisible = (columnName) => {
            const visibilityMap = this.columnVisibility();
            const columnEntry = visibilityMap[columnName];
            return typeof columnEntry === 'boolean' ? columnEntry : columnEntry.visible;
        };
        this.isColumnDisabled = (columnName) => this.isColumnVisible(columnName) && this.displayedColumns().length === 1;
        this._initialColumnVisibility = initialColumnVisibility;
        this._columnVisibility = signal(this._initialColumnVisibility);
        this._columnVisibility.set(this._initialColumnVisibility);
        this.columnVisibility = this._columnVisibility.asReadonly();
        this.allColumns = this.createAllColumns(this._initialColumnVisibility);
    }
    toggleVisibility(columnName) {
        const visibilityMap = this._columnVisibility();
        const columnEntry = visibilityMap[columnName];
        const newVisibilityState = typeof columnEntry === 'boolean' ? !columnEntry : { visible: !columnEntry.visible };
        this._columnVisibility.set({ ...visibilityMap, [columnName]: newVisibilityState });
    }
    setVisible(columnName) {
        const visibilityMap = this._columnVisibility();
        const columnEntry = visibilityMap[columnName];
        const newVisibilityState = typeof columnEntry === 'boolean' ? true : { visible: true };
        this._columnVisibility.set({ ...visibilityMap, [columnName]: newVisibilityState });
    }
    setInvisible(columnName) {
        const visibilityMap = this._columnVisibility();
        const columnEntry = visibilityMap[columnName];
        const newVisibilityState = typeof columnEntry === 'boolean' ? false : { visible: false };
        this._columnVisibility.set({ ...visibilityMap, [columnName]: newVisibilityState });
    }
    createAllColumns(initialColumnVisibility) {
        const keys = Object.keys(initialColumnVisibility);
        if (this.isBooleanConfig(initialColumnVisibility)) {
            return keys;
        }
        else {
            return keys.map((key) => {
                const values = initialColumnVisibility[key];
                return {
                    name: key,
                    ...values,
                };
            });
        }
    }
    isBooleanConfig(config) {
        return typeof Object.values(config)[0] === 'boolean';
    }
}
export const useBrnColumnManager = (initialColumnVisibility) => new BrnColumnManager(initialColumnVisibility);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnJuLWNvbHVtbi1tYW5hZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy91aS90YWJsZS9icmFpbi9zcmMvbGliL2Jybi1jb2x1bW4tbWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBZSxNQUFNLGVBQWUsQ0FBQztBQVU5RCxNQUFNLE9BQU8sZ0JBQWdCO0lBWTVCLFlBQVksdUJBQTBCO1FBTnRCLHFCQUFnQixHQUF3QixRQUFRLENBQUMsR0FBRyxFQUFFO1lBQ3JFLE9BQU8sTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztpQkFDN0MsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLE9BQU8sS0FBSyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7aUJBQzNFLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZCLENBQUMsQ0FBQyxDQUFDO1FBVWEsb0JBQWUsR0FBRyxDQUFDLFVBQWtCLEVBQUUsRUFBRTtZQUN4RCxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUM5QyxNQUFNLFdBQVcsR0FBRyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDOUMsT0FBTyxPQUFPLFdBQVcsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQztRQUM3RSxDQUFDLENBQUM7UUFDYyxxQkFBZ0IsR0FBRyxDQUFDLFVBQWtCLEVBQUUsRUFBRSxDQUN6RCxJQUFJLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxJQUFJLElB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TyxPQUFPLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssU0FBUyxDQUFDO0lBQ3RELENBQUM7Q0FDRDtBQUVELE1BQU0sQ0FBQyxNQUFNLG1CQUFtQixHQUFHLENBQWdDLHVCQUEwQixFQUFFLEVBQUUsQ0FDaEcsSUFBSSxnQkFBZ0IsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29tcHV0ZWQsIHNpZ25hbCwgdHlwZSBTaWduYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxudHlwZSBCcm5Db2x1bW5WaXNpYmlsaXR5ID0gUmVjb3JkPHN0cmluZywgYm9vbGVhbj4gfCBSZWNvcmQ8c3RyaW5nLCB7IHZpc2libGU6IGJvb2xlYW4gfT47XG5cbnR5cGUgQWxsQ29sdW1uc1Byb3BlcnR5VHlwZTxUPiA9IFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPlxuXHQ/IGtleW9mIFRbXVxuXHQ6IFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBpbmZlciBSPlxuXHRcdD8gKFIgZXh0ZW5kcyB7IHZpc2libGU6IGJvb2xlYW4gfSA/IHsgbmFtZToga2V5b2YgVCB9ICYgUiA6IG5ldmVyKVtdXG5cdFx0OiBuZXZlcjtcblxuZXhwb3J0IGNsYXNzIEJybkNvbHVtbk1hbmFnZXI8VCBleHRlbmRzIEJybkNvbHVtblZpc2liaWxpdHk+IHtcblx0cHJpdmF0ZSByZWFkb25seSBfaW5pdGlhbENvbHVtblZpc2liaWxpdHk6IFQ7XG5cdHByaXZhdGUgcmVhZG9ubHkgX2NvbHVtblZpc2liaWxpdHk7XG5cblx0cHVibGljIHJlYWRvbmx5IGFsbENvbHVtbnM6IEFsbENvbHVtbnNQcm9wZXJ0eVR5cGU8VD47XG5cdHB1YmxpYyByZWFkb25seSBjb2x1bW5WaXNpYmlsaXR5O1xuXHRwdWJsaWMgcmVhZG9ubHkgZGlzcGxheWVkQ29sdW1uczogU2lnbmFsPChrZXlvZiBUKVtdPiA9IGNvbXB1dGVkKCgpID0+IHtcblx0XHRyZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy5fY29sdW1uVmlzaWJpbGl0eSgpKVxuXHRcdFx0LmZpbHRlcigoWywgdmFsdWVdKSA9PiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicgPyB2YWx1ZSA6IHZhbHVlLnZpc2libGUpKVxuXHRcdFx0Lm1hcCgoW2tleV0pID0+IGtleSk7XG5cdH0pO1xuXG5cdGNvbnN0cnVjdG9yKGluaXRpYWxDb2x1bW5WaXNpYmlsaXR5OiBUKSB7XG5cdFx0dGhpcy5faW5pdGlhbENvbHVtblZpc2liaWxpdHkgPSBpbml0aWFsQ29sdW1uVmlzaWJpbGl0eTtcblx0XHR0aGlzLl9jb2x1bW5WaXNpYmlsaXR5ID0gc2lnbmFsKHRoaXMuX2luaXRpYWxDb2x1bW5WaXNpYmlsaXR5KTtcblx0XHR0aGlzLl9jb2x1bW5WaXNpYmlsaXR5LnNldCh0aGlzLl9pbml0aWFsQ29sdW1uVmlzaWJpbGl0eSk7XG5cdFx0dGhpcy5jb2x1bW5WaXNpYmlsaXR5ID0gdGhpcy5fY29sdW1uVmlzaWJpbGl0eS5hc1JlYWRvbmx5KCk7XG5cdFx0dGhpcy5hbGxDb2x1bW5zID0gdGhpcy5jcmVhdGVBbGxDb2x1bW5zKHRoaXMuX2luaXRpYWxDb2x1bW5WaXNpYmlsaXR5KTtcblx0fVxuXG5cdHB1YmxpYyByZWFkb25seSBpc0NvbHVtblZpc2libGUgPSAoY29sdW1uTmFtZTogc3RyaW5nKSA9PiB7XG5cdFx0Y29uc3QgdmlzaWJpbGl0eU1hcCA9IHRoaXMuY29sdW1uVmlzaWJpbGl0eSgpO1xuXHRcdGNvbnN0IGNvbHVtbkVudHJ5ID0gdmlzaWJpbGl0eU1hcFtjb2x1bW5OYW1lXTtcblx0XHRyZXR1cm4gdHlwZW9mIGNvbHVtbkVudHJ5ID09PSAnYm9vbGVhbicgPyBjb2x1bW5FbnRyeSA6IGNvbHVtbkVudHJ5LnZpc2libGU7XG5cdH07XG5cdHB1YmxpYyByZWFkb25seSBpc0NvbHVtbkRpc2FibGVkID0gKGNvbHVtbk5hbWU6IHN0cmluZykgPT5cblx0XHR0aGlzLmlzQ29sdW1uVmlzaWJsZShjb2x1bW5OYW1lKSAmJiB0aGlzLmRpc3BsYXllZENvbHVtbnMoKS5sZW5ndGggPT09IDE7XG5cblx0cHVibGljIHRvZ2dsZVZpc2liaWxpdHkoY29sdW1uTmFtZToga2V5b2YgVCkge1xuXHRcdGNvbnN0IHZpc2liaWxpdHlNYXAgPSB0aGlzLl9jb2x1bW5WaXNpYmlsaXR5KCk7XG5cdFx0Y29uc3QgY29sdW1uRW50cnkgPSB2aXNpYmlsaXR5TWFwW2NvbHVtbk5hbWVdO1xuXHRcdGNvbnN0IG5ld1Zpc2liaWxpdHlTdGF0ZSA9IHR5cGVvZiBjb2x1bW5FbnRyeSA9PT0gJ2Jvb2xlYW4nID8gIWNvbHVtbkVudHJ5IDogeyB2aXNpYmxlOiAhY29sdW1uRW50cnkudmlzaWJsZSB9O1xuXHRcdHRoaXMuX2NvbHVtblZpc2liaWxpdHkuc2V0KHsgLi4udmlzaWJpbGl0eU1hcCwgW2NvbHVtbk5hbWVdOiBuZXdWaXNpYmlsaXR5U3RhdGUgfSk7XG5cdH1cblx0cHVibGljIHNldFZpc2libGUoY29sdW1uTmFtZToga2V5b2YgVCkge1xuXHRcdGNvbnN0IHZpc2liaWxpdHlNYXAgPSB0aGlzLl9jb2x1bW5WaXNpYmlsaXR5KCk7XG5cdFx0Y29uc3QgY29sdW1uRW50cnkgPSB2aXNpYmlsaXR5TWFwW2NvbHVtbk5hbWVdO1xuXHRcdGNvbnN0IG5ld1Zpc2liaWxpdHlTdGF0ZSA9IHR5cGVvZiBjb2x1bW5FbnRyeSA9PT0gJ2Jvb2xlYW4nID8gdHJ1ZSA6IHsgdmlzaWJsZTogdHJ1ZSB9O1xuXHRcdHRoaXMuX2NvbHVtblZpc2liaWxpdHkuc2V0KHsgLi4udmlzaWJpbGl0eU1hcCwgW2NvbHVtbk5hbWVdOiBuZXdWaXNpYmlsaXR5U3RhdGUgfSk7XG5cdH1cblx0cHVibGljIHNldEludmlzaWJsZShjb2x1bW5OYW1lOiBrZXlvZiBUKSB7XG5cdFx0Y29uc3QgdmlzaWJpbGl0eU1hcCA9IHRoaXMuX2NvbHVtblZpc2liaWxpdHkoKTtcblx0XHRjb25zdCBjb2x1bW5FbnRyeSA9IHZpc2liaWxpdHlNYXBbY29sdW1uTmFtZV07XG5cdFx0Y29uc3QgbmV3VmlzaWJpbGl0eVN0YXRlID0gdHlwZW9mIGNvbHVtbkVudHJ5ID09PSAnYm9vbGVhbicgPyBmYWxzZSA6IHsgdmlzaWJsZTogZmFsc2UgfTtcblx0XHR0aGlzLl9jb2x1bW5WaXNpYmlsaXR5LnNldCh7IC4uLnZpc2liaWxpdHlNYXAsIFtjb2x1bW5OYW1lXTogbmV3VmlzaWJpbGl0eVN0YXRlIH0pO1xuXHR9XG5cblx0cHJpdmF0ZSBjcmVhdGVBbGxDb2x1bW5zKGluaXRpYWxDb2x1bW5WaXNpYmlsaXR5OiBUKTogQWxsQ29sdW1uc1Byb3BlcnR5VHlwZTxUPiB7XG5cdFx0Y29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGluaXRpYWxDb2x1bW5WaXNpYmlsaXR5KSBhcyAoa2V5b2YgVClbXTtcblx0XHRpZiAodGhpcy5pc0Jvb2xlYW5Db25maWcoaW5pdGlhbENvbHVtblZpc2liaWxpdHkpKSB7XG5cdFx0XHRyZXR1cm4ga2V5cyBhcyB1bmtub3duIGFzIEFsbENvbHVtbnNQcm9wZXJ0eVR5cGU8VD47XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBrZXlzLm1hcCgoa2V5KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHZhbHVlcyA9IGluaXRpYWxDb2x1bW5WaXNpYmlsaXR5W2tleV0gYXMgeyB2aXNpYmxlOiBib29sZWFuIH07XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0bmFtZToga2V5LFxuXHRcdFx0XHRcdC4uLnZhbHVlcyxcblx0XHRcdFx0fTtcblx0XHRcdH0pIGFzIEFsbENvbHVtbnNQcm9wZXJ0eVR5cGU8VD47XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBpc0Jvb2xlYW5Db25maWcoY29uZmlnOiBhbnkpOiBjb25maWcgaXMgUmVjb3JkPHN0cmluZywgYm9vbGVhbj4ge1xuXHRcdHJldHVybiB0eXBlb2YgT2JqZWN0LnZhbHVlcyhjb25maWcpWzBdID09PSAnYm9vbGVhbic7XG5cdH1cbn1cblxuZXhwb3J0IGNvbnN0IHVzZUJybkNvbHVtbk1hbmFnZXIgPSA8VCBleHRlbmRzIEJybkNvbHVtblZpc2liaWxpdHk+KGluaXRpYWxDb2x1bW5WaXNpYmlsaXR5OiBUKSA9PlxuXHRuZXcgQnJuQ29sdW1uTWFuYWdlcihpbml0aWFsQ29sdW1uVmlzaWJpbGl0eSk7XG4iXX0=