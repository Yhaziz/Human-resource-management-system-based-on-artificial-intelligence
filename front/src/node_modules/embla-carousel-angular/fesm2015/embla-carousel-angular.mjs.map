{"version":3,"file":"embla-carousel-angular.mjs","sources":["../../src/lib/utils.ts","../../src/lib/embla-carousel.directive.ts","../../src/public-api.ts","../../src/embla-carousel-angular.ts"],"sourcesContent":["import { InjectionToken, Provider } from '@angular/core'\nimport { EmblaOptionsType } from 'embla-carousel'\n\nexport const EMBLA_OPTIONS_TOKEN = new InjectionToken<\nEmblaOptionsType | undefined\n>('embla global options', {\n  factory: () => undefined,\n})\n\nexport function provideEmblaGlobalOptions(\n  options?: EmblaOptionsType,\n): Provider[] {\n  return [\n    {\n      provide: EMBLA_OPTIONS_TOKEN,\n      useValue: options,\n    },\n  ]\n}\n","import {\n  AfterViewInit,\n  Directive,\n  ElementRef,\n  EventEmitter,\n  Input,\n  NgZone,\n  OnChanges,\n  OnDestroy,\n  Output,\n  SimpleChanges,\n  inject,\n} from '@angular/core'\nimport EmblaCarousel, {\n  EmblaCarouselType,\n  EmblaEventType,\n  EmblaOptionsType,\n  EmblaPluginType,\n} from 'embla-carousel'\nimport {\n  areOptionsEqual,\n  arePluginsEqual,\n  canUseDOM,\n} from 'embla-carousel-reactive-utils'\nimport { Subject, takeUntil, throttleTime } from 'rxjs'\nimport { EMBLA_OPTIONS_TOKEN } from './utils'\n\n@Directive({\n  selector: '[emblaCarousel]',\n  exportAs: 'emblaCarousel',\n  standalone: true,\n})\nexport class EmblaCarouselDirective implements AfterViewInit, OnChanges, OnDestroy {\n  private globalOptions = inject(EMBLA_OPTIONS_TOKEN)\n  private ngZone = inject(NgZone)\n  protected _elementRef = inject<ElementRef<HTMLElement>>(ElementRef)\n\n  @Input() options: EmblaOptionsType = {}\n  @Input() plugins: EmblaPluginType[] = []\n  @Input() subscribeToEvents: EmblaEventType[] = []\n  @Input() eventsThrottleTime = 100\n\n  @Output() readonly emblaChange = new EventEmitter<EmblaEventType>()\n\n  private destroy$ = new Subject<void>()\n  private storedOptions = this.options\n  private storedPlugins = this.plugins\n  emblaApi?: EmblaCarouselType\n\n  constructor() {\n    if (this.globalOptions) {\n      EmblaCarousel.globalOptions = this.globalOptions\n    }\n  }\n\n  ngAfterViewInit(): void {\n    if (!canUseDOM()) return\n    this.ngZone.runOutsideAngular(() => {\n      this.emblaApi = EmblaCarousel(\n        this._elementRef.nativeElement,\n        this.storedOptions,\n        this.storedPlugins,\n      )\n    })\n    this.listenEvents()\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    const { plugins, options } = changes\n\n    if (options && !areOptionsEqual(this.storedOptions, options.currentValue)) {\n      this.storedOptions = options.currentValue\n      this.reInit()\n    }\n\n    if (plugins && !arePluginsEqual(this.storedPlugins, plugins.currentValue)) {\n      this.storedPlugins = plugins.currentValue\n      this.reInit()\n    }\n  }\n\n  scrollTo(...args: Parameters<EmblaCarouselType['scrollTo']>): void {\n    this.ngZone.runOutsideAngular(() => this.emblaApi?.scrollTo(...args))\n  }\n\n  scrollPrev(...args: Parameters<EmblaCarouselType['scrollPrev']>): void {\n    this.ngZone.runOutsideAngular(() => this.emblaApi?.scrollPrev(...args))\n  }\n\n  scrollNext(...args: Parameters<EmblaCarouselType['scrollNext']>): void {\n    this.ngZone.runOutsideAngular(() => this.emblaApi?.scrollNext(...args))\n  }\n\n  reInit() {\n    if (!this.emblaApi) {\n      return\n    }\n\n    this.ngZone.runOutsideAngular(() => {\n      this.emblaApi?.reInit(this.storedOptions, this.storedPlugins)\n    })\n  }\n\n  /**\n   * `eventsThrottler$` Subject was made just because `scroll` event fires too often.\n   */\n  private listenEvents(): void {\n    if (this.subscribeToEvents.length === 0) {\n      return\n    }\n\n    const eventsThrottler$ = new Subject<EmblaEventType>()\n\n    eventsThrottler$\n      .pipe(throttleTime(this.eventsThrottleTime), takeUntil(this.destroy$))\n      .subscribe(eventName => {\n        this.ngZone.run(() => this.emblaChange.emit(eventName))\n      })\n\n    this.ngZone.runOutsideAngular(() => {\n      this.subscribeToEvents.forEach(eventName => {\n        this.emblaApi!.on(eventName, () => eventsThrottler$.next(eventName))\n      })\n    })\n  }\n\n  ngOnDestroy(): void {\n    this.emblaApi?.destroy()\n    this.destroy$.next()\n    this.destroy$.complete()\n  }\n}\n","/*\n * Public API Surface of embla-carousel-angular\n */\n\nexport {\n  EmblaCarouselType,\n  EmblaEventType,\n  EmblaOptionsType,\n  EmblaPluginType,\n} from 'embla-carousel'\nexport { EmblaCarouselDirective } from './lib/embla-carousel.directive'\nexport * from './lib/utils'\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}